<template>
  <div class="login-container">
    <div class="login-left">
      <div class="branding">
        <div class="logo-icon">üèõÔ∏è</div>
        <h1>H·ªá Th·ªëng Qu·∫£n L√Ω Th∆∞ Vi·ªán</h1>
        <p class="tagline">Gi·∫£i ph√°p qu·∫£n l√Ω th∆∞ vi·ªán hi·ªán ƒë·∫°i v√† hi·ªáu qu·∫£</p>
        
        <div class="features">
          <div class="feature-item">
            <font-awesome-icon :icon="['fas', 'book']" class="feature-icon" />
            <span>Qu·∫£n l√Ω s√°ch d·ªÖ d√†ng</span>
          </div>
          <div class="feature-item">
            <font-awesome-icon :icon="['fas', 'users']" class="feature-icon" />
            <span>Theo d√µi ƒë·ªôc gi·∫£</span>
          </div>
          <div class="feature-item">
            <font-awesome-icon :icon="['fas', 'chart-bar']" class="feature-icon" />
            <span>Th·ªëng k√™ chi ti·∫øt</span>
          </div>
          <div class="feature-item">
            <font-awesome-icon :icon="['fas', 'lock']" class="feature-icon" />
            <span>B·∫£o m·∫≠t cao</span>
          </div>
        </div>
      </div>
    </div>

    <div class="login-right">
      <div class="login-card">
        <div class="login-header">
          <h2>ƒêƒÉng nh·∫≠p</h2>
          <p>Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i!</p>
        </div>

        <form @submit.prevent="handleLogin" class="login-form">
          <div class="form-group">
            <label for="username">Email</label>
            <div class="input-wrapper">
              <font-awesome-icon :icon="['fas', 'user']" class="input-icon" />
              <input
                id="username"
                v-model="formData.username"
                type="email"
                placeholder="Nh·∫≠p email"
                required
                autocomplete="username"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="password">M·∫≠t kh·∫©u</label>
            <div class="input-wrapper">
              <span class="input-icon">üîí</span>
              <input
                id="password"
                v-model="formData.password"
                type="password"
                placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
                required
                autocomplete="current-password"
              />
            </div>
          </div>

          <div class="form-options">
            <label class="checkbox-label">
              <input v-model="formData.rememberMe" type="checkbox" />
              <span>Ghi nh·ªõ ƒëƒÉng nh·∫≠p</span>
            </label>
            <router-link to="/forgot-password" class="forgot-password">Qu√™n m·∫≠t kh·∫©u?</router-link>
          </div>

          <button type="submit" class="login-button" :disabled="isLoading">
            <span v-if="!isLoading">ƒêƒÉng nh·∫≠p</span>
            <span v-else>ƒêang x·ª≠ l√Ω...</span>
          </button>

          <div v-if="errorMessage" class="error-message">
            {{ errorMessage }}
          </div>
        </form>

        <div class="login-footer">
          <p>Ch∆∞a c√≥ t√†i kho·∫£n? <router-link to="/register">ƒêƒÉng k√Ω ngay</router-link></p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { useRouter } from 'vue-router'
import { useLogin } from '@/composables/useLogin'

const router = useRouter()

const loginComposable = useLogin()

const {
  formData,
  isLoading,
  errorMessage
} = loginComposable

const handleLogin = () => loginComposable.handleLogin(router)
</script>

<style scoped src="@/styles/LoginView.css"></style>
